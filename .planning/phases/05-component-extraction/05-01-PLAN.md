---
phase: 05-component-extraction
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - test/formatters.test.js
autonomous: true

must_haves:
  truths:
    - "All 7 formatter functions have comprehensive unit tests"
    - "formatTime handles undefined, very large values (999.99), and 59-second rounding edge (1.99 min)"
    - "formatTimerDisplay handles undefined, large seconds (3661), and exactly 60 seconds"
    - "formatCountdown handles undefined, large values (3600+), and boundary at exactly 0"
    - "formatTemp handles negative Celsius in both C and F modes, and unknown unit fallback"
    - "formatVolume handles zero volume in both units and very small volumes (0.1L) in oz mode"
    - "formatWeight handles zero weight in both units, very small (1g) and large (1000g) in oz mode"
    - "formatPressure handles zero, very low (300 hPa), very high (1050 hPa), and decimal precision in inHg"
    - "Total test count increases by at least 15 new test cases"
  artifacts:
    - path: "test/formatters.test.js"
      provides: "Comprehensive formatter test coverage"
      contains: "describe.*formatTime|formatTimerDisplay|formatCountdown|formatTemp|formatVolume|formatWeight|formatPressure"
  key_links:
    - from: "test/formatters.test.js"
      to: "formatters.js"
      via: "import"
      pattern: "import.*from.*formatters"
---

<objective>
Fill formatter test coverage gaps to satisfy TEST-02 requirement.

Purpose: The existing formatter tests from Phase 03 cover happy paths but are missing edge cases (undefined input, boundary values, decimal precision). This plan adds missing test cases to ensure all 7 formatter functions have thorough coverage.
Output: Updated test/formatters.test.js with comprehensive edge case coverage.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@formatters.js
@test/formatters.test.js
@converters.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add comprehensive edge case tests for all formatters</name>
  <files>test/formatters.test.js</files>
  <action>
Review the existing formatter tests and the formatter source code. Add missing test cases to achieve thorough coverage. The minimum requirement is 15 new test cases across all formatters. Specifically:

**formatTime (add 3+ tests):**
- Undefined input (should return '--:--' like null)
- Very large values (e.g., 999.99)
- Fractional edge: 59 seconds rounding (e.g., 1.99 minutes -- check if seconds round to 59 or 60)

**formatTimerDisplay (add 2+ tests):**
- Undefined input
- Large seconds (e.g., 3661 -- over an hour)
- Edge: exactly 60 seconds

**formatCountdown (add 2+ tests):**
- Undefined input
- Large values (3600+ seconds -- over an hour)

**formatTemp (add 3+ tests):**
- Negative Celsius values in both C and F mode (e.g., -10 in C, -10 in F)
- Verify rounding behavior for fractional Celsius in F mode (e.g., 37.5 C -> what F?)
- Unit parameter edge: unknown unit string (e.g., 'K') -- verify fallback behavior

**formatVolume (add 2+ tests):**
- Zero volume in both units (0 in L, 0 in oz)
- Very small volumes (0.1L) in oz mode -- verify decimal precision

**formatWeight (add 2+ tests):**
- Zero weight in both units (0 in g, 0 in oz)
- Very small values (1g) in oz mode
- Large values (1000g) in oz mode

**formatPressure (add 2+ tests):**
- Zero pressure in both units
- Very low pressure (e.g., 300 hPa -- extreme altitude)
- Very high pressure (e.g., 1050 hPa)
- Verify decimal precision in inHg mode for non-standard values

Do NOT modify formatters.js -- only add tests. If any tests fail because formatters don't handle edge cases, note the behavior (the formatters were extracted byte-for-byte from the original component, so their current behavior is the correct behavior to test against).
  </action>
  <verify>Run `npm test -- test/formatters.test.js` -- all tests pass, no failures</verify>
  <done>All 7 formatter functions have edge case tests covering undefined, zero, negative, boundary, and large values. Each describe block has at least 5 test cases. Total test count increased by at least 15 new test cases.</done>
</task>

</tasks>

<verification>
- `npm test -- test/formatters.test.js` passes with 0 failures
- Each of the 7 formatter describe blocks has at least 5 test cases
- Edge cases for undefined, zero, negative values are covered per formatter
</verification>

<success_criteria>
- All formatter tests pass
- Every format function (formatTime, formatTimerDisplay, formatCountdown, formatTemp, formatVolume, formatWeight, formatPressure) has tests for both unit variants plus edge cases
- At least 15 new test cases added
- TEST-02 requirement satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/05-component-extraction/05-01-SUMMARY.md`
</output>
