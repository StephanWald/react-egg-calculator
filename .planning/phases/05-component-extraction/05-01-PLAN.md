---
phase: 05-component-extraction
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - test/formatters.test.js
autonomous: true

must_haves:
  truths:
    - "All 7 formatter functions have comprehensive unit tests"
    - "Edge cases (null, undefined, negative, zero, large values) covered"
    - "Both unit variants tested for each format function"
  artifacts:
    - path: "test/formatters.test.js"
      provides: "Comprehensive formatter test coverage"
      contains: "describe.*formatTime|formatTimerDisplay|formatCountdown|formatTemp|formatVolume|formatWeight|formatPressure"
  key_links:
    - from: "test/formatters.test.js"
      to: "formatters.js"
      via: "import"
      pattern: "import.*from.*formatters"
---

<objective>
Fill formatter test coverage gaps to satisfy TEST-02 requirement.

Purpose: The existing formatter tests from Phase 03 cover happy paths but may be missing edge cases (undefined input, boundary values, decimal precision). This plan adds missing test cases to ensure all 7 formatter functions have thorough coverage.
Output: Updated test/formatters.test.js with comprehensive edge case coverage.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@formatters.js
@test/formatters.test.js
@converters.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add comprehensive edge case tests for all formatters</name>
  <files>test/formatters.test.js</files>
  <action>
Review the existing formatter tests and the formatter source code. Add missing test cases to achieve thorough coverage. Specifically:

**formatTime:**
- Undefined input (should return '--:--' like null)
- Very large values (e.g., 999.99)
- Fractional edge: 59 seconds rounding (e.g., 1.99 minutes = close to 2:00)

**formatTimerDisplay:**
- Undefined input
- Large seconds (e.g., 3661 = over an hour)
- Edge: exactly 60 seconds

**formatCountdown:**
- Undefined input
- Large values (3600+ seconds)
- Boundary: exactly 0

**formatTemp:**
- Negative Celsius values in both C and F mode
- Verify rounding behavior for fractional Celsius in F mode
- Unit parameter edge: unknown unit (fallback behavior)

**formatVolume:**
- Zero volume in both units
- Very small volumes (0.1L) in oz mode
- Verify decimal precision in oz mode

**formatWeight:**
- Zero weight in both units
- Very small values (1g) in oz mode
- Large values (1000g) in oz mode

**formatPressure:**
- Zero pressure
- Very low pressure (e.g., 300 hPa, extreme altitude)
- Very high pressure (e.g., 1050 hPa)
- Verify decimal precision in inHg mode

Do NOT modify formatters.js -- only add tests. If any tests fail because formatters don't handle edge cases, note the behavior (the formatters were extracted byte-for-byte from the original component, so their current behavior is the correct behavior to test against).
  </action>
  <verify>Run `npm test -- test/formatters.test.js` -- all tests pass, no failures</verify>
  <done>All 7 formatter functions have edge case tests covering null/undefined, zero, negative, boundary, and large values. Total test count increased by at least 15 new test cases.</done>
</task>

</tasks>

<verification>
- `npm test -- test/formatters.test.js` passes with 0 failures
- Each of the 7 formatter describe blocks has at least 5 test cases
- Edge cases for null, undefined, zero, negative values are covered
</verification>

<success_criteria>
- All formatter tests pass
- Every format function (formatTime, formatTimerDisplay, formatCountdown, formatTemp, formatVolume, formatWeight, formatPressure) has tests for both unit variants plus edge cases
- TEST-02 requirement satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/05-component-extraction/05-01-SUMMARY.md`
</output>
