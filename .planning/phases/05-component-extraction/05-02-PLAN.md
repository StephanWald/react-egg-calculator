---
phase: 05-component-extraction
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ConfigDialog.jsx
  - components/TimerOverlay.jsx
  - components/ConsistencyPicker.jsx
autonomous: true

must_haves:
  truths:
    - "ConfigDialog renders unit toggles and language selector as modal"
    - "TimerOverlay renders countdown, pause/resume, stop, and completion states"
    - "ConsistencyPicker renders 4 consistency buttons with selected highlight"
  artifacts:
    - path: "components/ConfigDialog.jsx"
      provides: "Settings dialog modal component"
      exports: ["ConfigDialog"]
    - path: "components/TimerOverlay.jsx"
      provides: "Full-screen timer overlay component"
      exports: ["TimerOverlay"]
    - path: "components/ConsistencyPicker.jsx"
      provides: "Egg consistency selection component"
      exports: ["ConsistencyPicker"]
  key_links:
    - from: "components/ConfigDialog.jsx"
      to: "useTranslation.js"
      via: "import useTranslation"
      pattern: "import.*useTranslation"
    - from: "components/TimerOverlay.jsx"
      to: "formatters.js"
      via: "import formatCountdown"
      pattern: "import.*formatCountdown"
    - from: "components/ConsistencyPicker.jsx"
      to: "constants.js"
      via: "import CONSISTENCY_OPTIONS"
      pattern: "import.*CONSISTENCY_OPTIONS"
---

<objective>
Extract ConfigDialog, TimerOverlay, and ConsistencyPicker from egg-calculator.jsx into standalone presentational components.

Purpose: These three components are self-contained UI sections with clear boundaries. ConfigDialog is a modal (~95 lines of JSX), TimerOverlay is a full-screen overlay (~63 lines), and ConsistencyPicker is a button grid (~20 lines). Extracting them first removes ~180 lines of JSX from the main component.
Output: Three new component files in components/ directory, each receiving all data via props.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@egg-calculator.jsx
@constants.js
@formatters.js
@useTranslation.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract ConfigDialog component</name>
  <files>components/ConfigDialog.jsx</files>
  <action>
Create `components/ConfigDialog.jsx` by extracting the config dialog modal from egg-calculator.jsx.

**Locating the JSX (content-based -- do NOT rely on line numbers):**
Read egg-calculator.jsx and find the config dialog section. Search for the comment `{/* ============ CONFIG DIALOG ============ */}` followed by `{showConfigDialog && (`. The section starts with the backdrop div (`className="fixed inset-0 bg-black bg-opacity-50 z-40"`) and ends with the closing `</>` of the fragment, just before the `{/* ============ TIMER OVERLAY ============ */}` comment. Currently around lines 275-370 but line numbers may shift.

The component is presentational -- it receives all data and callbacks via props:
- `visible` (boolean): Whether dialog is shown (controls rendering via early return)
- `onClose` (function): Close callback (backdrop click + X button)
- `tempUnit`, `volumeUnit`, `weightUnit`, `pressureUnit` (strings): Current unit values
- `onTempUnitChange`, `onVolumeUnitChange`, `onWeightUnitChange`, `onPressureUnitChange` (functions): Unit toggle callbacks
- `languages` (array): Available languages array from useTranslation
- `currentLanguage` (string): Current language code (lang)
- `onLanguageChange` (function): Language change callback (setLanguage)

The component calls `useTranslation()` directly for `t()` translations (it's a simple hook, not a source of truth).

Copy the JSX exactly as-is from the component. The backdrop div and dialog div are siblings wrapped in a fragment. When `visible` is false, return null.

Add JSDoc comment documenting all props.

Export as named export: `export const ConfigDialog = ...`
  </action>
  <verify>File exists at components/ConfigDialog.jsx. Has named export ConfigDialog. Has JSDoc with @param for each prop. Imports useTranslation.</verify>
  <done>ConfigDialog.jsx created with exact JSX from the CONFIG DIALOG section, accepting all data as props, with proper imports for useTranslation.</done>
</task>

<task type="auto">
  <name>Task 2: Extract TimerOverlay and ConsistencyPicker components</name>
  <files>components/TimerOverlay.jsx, components/ConsistencyPicker.jsx</files>
  <action>
**TimerOverlay** (components/TimerOverlay.jsx):
Extract the timer overlay section from egg-calculator.jsx.

**Locating the JSX (content-based):**
Search for the comment `{/* ============ TIMER OVERLAY ============ */}` followed by `{(timerActive || timerComplete) && (`. The section starts with the backdrop div (`className="fixed inset-0 bg-black bg-opacity-70 z-50"`) and ends at the closing `</>` of the fragment, just before the `{/* Settings Toggle */}` comment. Currently around lines 372-435 but line numbers may shift.

Props:
- `timerActive` (boolean): Whether timer is running
- `timerComplete` (boolean): Whether timer finished
- `timerPaused` (boolean): Whether timer is paused
- `timerRemaining` (number): Seconds remaining
- `onPause` (function): Pause callback (pauseTimer)
- `onResume` (function): Resume callback (resumeTimer)
- `onStop` (function): Stop callback (stopTimer)
- `onDismiss` (function): Dismiss complete callback (dismissComplete)

The component calls `useTranslation()` for `t()`. Imports `formatCountdown` from `../formatters`.

When neither `timerActive` nor `timerComplete`, return null. Copy the JSX exactly -- it has a backdrop div and an overlay div as siblings in a fragment. The content switches between complete state and running state via ternary.

**ConsistencyPicker** (components/ConsistencyPicker.jsx):
Extract the consistency selection section from egg-calculator.jsx.

**Locating the JSX (content-based):**
Search for the comment `{/* Consistency Selection */}` followed by `<div className="mb-5">` containing a label with `{t('consistency')}` and a `grid grid-cols-4` of CONSISTENCY_OPTIONS buttons. The section ends at the closing `</div>` of the mb-5 wrapper, just before the `{/* Egg Count & Water Volume */}` comment. Currently around lines 721-741 but line numbers may shift.

Props:
- `consistency` (string): Current consistency ID
- `tempUnit` (string): Temperature unit for display
- `onConsistencyChange` (function): Callback receiving the full option object

Imports `useTranslation` for `t()`, `CONSISTENCY_OPTIONS` from `../constants`, `formatTemp` from `../formatters`.

Copy JSX exactly. The outer div has `className="mb-5"`, contains a label and a 4-column grid of buttons.

Add JSDoc comments to both components. Export as named exports.
  </action>
  <verify>Both files exist. Each has named export. TimerOverlay imports formatCountdown. ConsistencyPicker imports CONSISTENCY_OPTIONS and formatTemp. JSDoc present on both.</verify>
  <done>TimerOverlay.jsx and ConsistencyPicker.jsx created with exact JSX, proper props interfaces, and all necessary imports.</done>
</task>

</tasks>

<verification>
- `ls components/ConfigDialog.jsx components/TimerOverlay.jsx components/ConsistencyPicker.jsx` -- all exist
- Each file has a named export matching the filename
- No hook calls except useTranslation
- All constants/formatters imported from correct relative paths (../)
- JSDoc present on each component
</verification>

<success_criteria>
- 3 component files created in components/ directory
- Each component is presentational (props + useTranslation only)
- JSX copied exactly from egg-calculator.jsx without modification
- All imports correct (useTranslation, constants, formatters)
- Components ready for integration in Plan 04
</success_criteria>

<output>
After completion, create `.planning/phases/05-component-extraction/05-02-SUMMARY.md`
</output>
