---
phase: 06-mobile-responsiveness
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tailwind.config.js
  - package.json
  - index.css
  - egg-calculator.jsx
autonomous: true

must_haves:
  truths:
    - "Tailwind scans all source files including components/ and hooks/ directories"
    - "@headlessui/react and react-swipeable are installed and available"
    - "Main app layout uses mobile-first padding (p-4 base, md:p-8 for desktop)"
    - "Energy and formula sections are responsive at 320px width"
    - "Slider inputs have larger touch targets on mobile"
  artifacts:
    - path: "tailwind.config.js"
      provides: "Content paths covering all source directories"
      contains: "components"
    - path: "package.json"
      provides: "New dependencies for mobile UI"
      contains: "@headlessui/react"
    - path: "index.css"
      provides: "Mobile-first base styles for sliders and touch feedback"
      contains: "appearance"
    - path: "egg-calculator.jsx"
      provides: "Responsive main layout and inline sections"
      contains: "min-h-dvh"
  key_links:
    - from: "tailwind.config.js"
      to: "components/*.jsx"
      via: "content glob pattern"
      pattern: "components.*jsx"
    - from: "index.css"
      to: "all components"
      via: "global base styles"
      pattern: "input.*range"
---

<objective>
Set up the mobile responsiveness foundation: fix Tailwind content scanning, install required dependencies, add mobile-first base CSS, and make the main layout wrapper and inline sections (energy, formulas, notices) responsive.

Purpose: Without fixing the Tailwind content path, no responsive classes added to component files will survive production builds. The npm packages (@headlessui/react, react-swipeable) are prerequisites for Plan 03. The base CSS provides slider and touch feedback styles that all components benefit from.

Output: Working foundation where Tailwind correctly scans all files, dependencies are available, and the main app shell is mobile-responsive.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-mobile-responsiveness/06-CONTEXT.md
@.planning/phases/06-mobile-responsiveness/06-RESEARCH.md
@tailwind.config.js
@index.css
@egg-calculator.jsx
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Tailwind config, install dependencies, add mobile base CSS</name>
  <files>tailwind.config.js, package.json, index.css</files>
  <action>
1. **Fix tailwind.config.js content paths** to scan ALL source directories:
   ```js
   content: [
     "./index.html",
     "./*.{js,jsx}",
     "./components/**/*.{js,jsx}",
     "./hooks/**/*.{js,jsx}",
   ],
   ```
   This is CRITICAL -- the current config only scans root-level files. Component files in `components/` are NOT being scanned, which means any Tailwind classes used only in those files may be purged in production builds.

2. **Install new dependencies** for mobile UI:
   ```bash
   npm install @headlessui/react react-swipeable
   ```

3. **Add mobile-first base styles to index.css** after the Tailwind directives:
   ```css
   @layer base {
     /* Prevent iOS Safari auto-zoom on input focus */
     input, select, textarea {
       font-size: 16px;
     }

     /* Larger slider thumb and track on mobile for touch friendliness */
     input[type="range"] {
       -webkit-appearance: none;
       appearance: none;
       height: 2rem;
       background: transparent;
       cursor: pointer;
     }

     input[type="range"]::-webkit-slider-thumb {
       -webkit-appearance: none;
       appearance: none;
       width: 28px;
       height: 28px;
       border-radius: 50%;
       cursor: pointer;
     }

     @media (min-width: 768px) {
       input[type="range"] {
         height: 1.5rem;
       }
       input[type="range"]::-webkit-slider-thumb {
         width: 20px;
         height: 20px;
       }
     }

     /* Touch feedback for interactive elements */
     button, [role="button"] {
       -webkit-tap-highlight-color: transparent;
     }

     button:active, [role="button"]:active {
       transform: scale(0.97);
     }
   }
   ```

   The slider styles use larger thumb/track on mobile (28px thumb, 2rem track) and smaller on desktop (20px thumb, 1.5rem track). The `font-size: 16px` on inputs prevents iOS Safari auto-zoom. The `scale(0.97)` on active provides subtle touch feedback.

   **Important:** Keep the existing `@tailwind base/components/utilities` directives at the top. Add the `@layer base` block AFTER them.
  </action>
  <verify>
    - Run `npm run build` to verify the build succeeds
    - Run `npm test` to verify existing tests still pass
    - Check that `node_modules/@headlessui/react` exists
    - Check that `node_modules/react-swipeable` exists
  </verify>
  <done>Tailwind config scans components/ and hooks/ directories, @headlessui/react and react-swipeable installed, index.css has mobile-first base styles for inputs and sliders</done>
</task>

<task type="auto">
  <name>Task 2: Make main layout and inline sections responsive</name>
  <files>egg-calculator.jsx</files>
  <action>
Update `egg-calculator.jsx` to be mobile-first responsive. Changes:

1. **Root wrapper** (line ~180): Change `min-h-screen` to `min-h-dvh` (or add it -- current is `min-h-screen`). Use mobile-first padding:
   ```jsx
   <div className="min-h-dvh bg-gradient-to-br from-amber-50 to-orange-100 p-3 sm:p-4 md:p-8">
   ```
   Use `p-3` for tight mobile, `sm:p-4` for wider mobile, `md:p-8` for desktop. The `min-h-dvh` fixes mobile browser UI bar issues.

2. **Header section** (line ~184-190): Ensure title scales down on mobile:
   ```jsx
   <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold text-amber-900 mb-2">
   ```
   The settings gear button should meet 44px touch target:
   ```jsx
   <button ... className="p-2 min-h-[44px] min-w-[44px] bg-white rounded-lg shadow-md hover:bg-gray-50 transition-colors text-lg" ...>
   ```

3. **Settings toggle button** (line ~224): Add `min-h-[44px]` for touch target:
   ```jsx
   <button ... className="w-full mb-4 p-3 min-h-[44px] bg-white rounded-xl shadow-md flex items-center justify-between hover:bg-gray-50 transition-colors">
   ```

4. **Main card** (line ~254): Mobile-first padding:
   ```jsx
   <div className="bg-white rounded-2xl shadow-xl p-4 sm:p-6 md:p-8">
   ```

5. **Important Notices section** (lines ~309-318): Notices should stack fine already (they use `space-y-2`). Just ensure the text doesn't overflow at 320px. Add `text-xs sm:text-sm` to the text divs to use smaller text on mobile.

6. **Energy section** (lines ~321-341):
   - The toggle button should meet touch target: add `min-h-[44px]`
   - The energy grid `grid-cols-2` can overflow at 320px. Change to `grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm` so it stacks on mobile.

7. **Formula section** (lines ~344-362):
   - The toggle button should meet touch target: add `min-h-[44px]`
   - Formula content is already `text-sm` with `overflow-x-auto` on formulas. This is fine. Ensure the formula `font-mono` blocks don't overflow by confirming they have `overflow-x-auto`.

8. **Footer** (line ~366): Fine as-is (text-xs, text-center).

**Do NOT change** any component props or hook usage. Only modify className strings and the outermost wrapper elements. Preserve all existing functionality.
  </action>
  <verify>
    - Run `npm run build` to verify build succeeds
    - Run `npm test` to verify all tests pass
    - Visually inspect: the layout should still look correct at desktop widths
  </verify>
  <done>Main app shell uses min-h-dvh, mobile-first padding (p-3/sm:p-4/md:p-8), all inline toggle buttons meet 44px touch target, energy grid stacks on mobile, header title scales for mobile</done>
</task>

</tasks>

<verification>
- `npm run build` succeeds (Tailwind purges correctly with updated content paths)
- `npm test` passes (no behavioral changes)
- Tailwind config includes `./components/**/*.{js,jsx}` and `./hooks/**/*.{js,jsx}`
- `@headlessui/react` and `react-swipeable` are in package.json dependencies
- `index.css` has mobile slider styles and iOS zoom prevention
- `egg-calculator.jsx` uses `min-h-dvh`, mobile-first padding, 44px touch targets on toggle buttons
</verification>

<success_criteria>
- Build passes with updated Tailwind content paths
- All 218 tests pass
- New npm packages installed successfully
- Main layout is mobile-first with proper viewport height
- All toggle buttons meet 44x44px minimum touch target
- Energy grid stacks to single column on mobile
</success_criteria>

<output>
After completion, create `.planning/phases/06-mobile-responsiveness/06-01-SUMMARY.md`
</output>
